---
title: Use Application Insights in Data API builder
description: The file covers articles such as how to configure Application Insights, send custom telemetry data to Application Insights, and monitor performance and availability.
author: abhishekkumams
ms.author: abhishekkuma
ms.service: data-api-builder
ms.topic: use-application-insights
ms.date: 08/28/2023
---

# Use Application Insights

Application Insights is a service provided by Microsoft Azure that enables developers to monitor and gain insights into the performance and usage of their applications. 
It helps in understanding how the application is performing, identifying and diagnosing issues, and making data-driven decisions to improve application performance and user experience. We can track application availability, response times, performance metrics, and user behavior, among other things. 

> [!NOTE]
> This feature is not supported when hosting Data API builder in Azure Web Apps.

## How to configure Application Insights

### Using DAB CLI
Feature work in Progress

### Manually editing the runtime config file

Add a new property under runtime section in the runtime config file.
```json
{
  "runtime": {
    //...
    "telemetry": {
      "application-insights": {
        "enabled": true,    // To enable/disable application insights telemetry
        "connection-string": "{APP_INSIGHTS_CONNECTION_STRING}" // Application Insights connection string to send telemetry
      }
    }
    //...
  }
}
```

> [!NOTE]
> 1. By default, application insights are turned off.
> 2. To enable, enabled flag should be made true and connection-string should be provided.
> 3. Application Insights connection string can be retrieved from the resource page in Azure portal.


## What telemetry data is sent to Application Insights
When you enable Application Insights in your application, it will start sending telemetry data to the Application Insights service. The type of data that is sent includes: 
 
1. Request telemetry: Information about each incoming request to DAB, such as the URL, response time, and status code. 
2. Trace telemetry: Logs that are generated by DAB.
3. Exception telemetry: Information about any exceptions or errors that occur in DAB. 
4. Performance counters: Metrics related to the performance of DAB, such as CPU usage, memory usage, and network traffic.
 

> [!NOTE]
> 1. The logs that are sent to Application Insights are same as the logs printed by Data API builder in console.
> 2. These logs can be seen under the "Logs" tab in the left-hand menu in Application Insights resources using the below query.
  ```
  traces
  | order by timestamp
  ```

> 3. In traces table, Loglevel is mapped to Severity Level as follows:

| LogLevel | Severity Level | Severity Level Value |
|----------|----------------|----------------------|
| Trace    | Verbose        |       0              |
| Debug    | Verbose        |       0              |
| Information | Information |       1              |
| Warning  | Warning        |       2              |
| Error    | Error          |       3              |
| Critical | Critical       |       4              |

> 4. LogLevel can be set using `--LogLevel` option when using CLI. Otherwise, the host mode in the config file determines the minimum loglevel. If HostMode is set to `Production`, the minimum log level is `Error`, while it's `Debug` for `Development` mode.


## How to check different metrics in Application Insights Portal
1. Checking Live Metrics

![Checking Live metrics from Data API bulder.](./media/application-insights-live-metrics.png)


2. Checking Application Logs/Traces

![Checking Logs during running of Data API builder.](./media/application-insights-app-logs.png)

3. Checking Application Requests

![Checking requests made to Data API builder.](./media/application-insights-app-requests.png)

4. Checking Application Exceptions

![Checking exceptions occured on Data API builder.](./media/application-insights-app-exceptions.png)

